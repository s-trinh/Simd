language: cpp

os:
  - linux
  - osx

# Set Xcode version to 10.1 (default is 9.4)
osx_image: xcode10.1
  
compiler:
  - gcc
  - clang

sudo: required
dist: xenial

before_install:
  - sudo apt-get update -qq
  - sudo apt-get install -qq valgrind

before_script:
  - mkdir build
  - cd build
  - cmake ../prj/cmake -DCMAKE_BUILD_TYPE=Debug -DSIMD_AVX512=OFF

script: 
  - make
  - cp -R ../data ../../
  - cat /proc/cpuinfo
  - ./Test
  - cd ../test
  - cmake . -DCMAKE_BUILD_TYPE=Debug
  - make
  - valgrind --track-origins=yes ./UseFaceDetection
